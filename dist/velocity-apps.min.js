/**
 * Velocity Apps - v1.0.0-alpha1 - 2020-02-27
 * Description: Velocity Apps is application and controllers library for CMSGears.
 * License: GPL-3.0-or-later
 * Author: Bhagwat Singh Chouhan
 */


var cmg;function setDataByBase(e,t,o,r){cmt.utils.ajax.triggerPost(ajaxUrl+e+"/set-data?id="+t,"Meta[key]="+o+"&Meta[value]="+r)}function removeDataByBase(e,t,o){cmt.utils.ajax.triggerPost(ajaxUrl+e+"/remove-data?id="+t,"Meta[key]="+o)}function setAttributeByBase(e,t,o,r){cmt.utils.ajax.triggerPost(ajaxUrl+e+"/set-attribute?id="+t,"Meta[key]="+o+"&Meta[value]="+r)}function removeAttributeByBase(e,t,o){cmt.utils.ajax.triggerPost(ajaxUrl+e+"/remove-attribute?id="+t,"Meta[key]="+o)}function setConfigByBase(e,t,o,r){cmt.utils.ajax.triggerPost(ajaxUrl+e+"/set-config?id="+t,"Meta[key]="+o+"&Meta[value]="+r)}function removeConfigByBase(e,t,o){cmt.utils.ajax.triggerPost(ajaxUrl+e+"/remove-config?id="+t,"Meta[key]="+o)}function setSettingByBase(e,t,o,r){cmt.utils.ajax.triggerPost(ajaxUrl+e+"/set-setting?id="+t,"Meta[key]="+o+"&Meta[value]="+r)}function removeSettingByBase(e,t,o){cmt.utils.ajax.triggerPost(ajaxUrl+e+"/remove-setting?id="+t,"Meta[key]="+o)}function initDataCmtDirect(){jQuery(".cmt-data-direct").change(function(){var e=jQuery(this),t=e.attr("data-base"),o=e.attr("data-id"),r=e.attr("data-key");switch(e.attr("data-type")){case"data":setDataByBase(t,o,r,e.val());break;case"attribute":setAttributeByBase(t,o,r,e.val());break;case"config":setConfigByBase(t,o,r,e.val());break;case"setting":setSettingByBase(t,o,r,e.val())}})}function setUserData(e,t){cmt.utils.ajax.triggerPost(ajaxUrl+"user/set-data","Meta[key]="+e+"&Meta[value]="+t)}function removeUserData(e){cmt.utils.ajax.triggerPost(ajaxUrl+"user/remove-data","Meta[key]="+e)}function setUserAttribute(e,t){cmt.utils.ajax.triggerPost(ajaxUrl+"user/set-attribute","Meta[key]="+e+"&Meta[value]="+t)}function removeUserAttribute(e){cmt.utils.ajax.triggerPost(ajaxUrl+"user/remove-attribute","Meta[key]="+e)}function setUserConfig(e,t){cmt.utils.ajax.triggerPost(ajaxUrl+"user/set-config","Meta[key]="+e+"&Meta[value]="+t)}function removeUserConfig(e){cmt.utils.ajax.triggerPost(ajaxUrl+"user/remove-config","Meta[key]="+e)}function setUserSetting(e,t){cmt.utils.ajax.triggerPost(ajaxUrl+"user/set-setting","Meta[key]="+e+"&Meta[value]="+t)}function removeUserSetting(e){cmt.utils.ajax.triggerPost(ajaxUrl+"user/remove-setting","Meta[key]="+e)}function initLazyWidgetObserver(){var e=[].slice.call(document.querySelectorAll(".cmt-lazy-widget"));"IntersectionObserver"in window?(intersectionObserver=new IntersectionObserver(function(e,t){e.forEach(function(e){(0<e.intersectionRatio||e.isIntersecting)&&(target=e.target,processLazyWidget(target),t.unobserve(target))})}),e.forEach(function(e){intersectionObserver.observe(e)})):initLazyWidgetListener(e)}function initLazyWidgetListener(e){var t=!1,o=function(){!1===t&&(t=!0,setTimeout(function(){e.forEach(function(t){t.getBoundingClientRect().top<=window.innerHeight&&0<=t.getBoundingClientRect().bottom&&"none"!==getComputedStyle(t).display&&(processLazyWidget(t),0===(e=e.filter(function(e){return t!==e})).length&&(document.removeEventListener("scroll",o),window.removeEventListener("resize",o),window.removeEventListener("orientationchange",o)))}),t=!1},200))};document.addEventListener("scroll",o),window.addEventListener("resize",o),window.addEventListener("orientationchange",o)}function processLazyWidget(e){cmt.api.utils.request.trigger(cmt.api.root.getApplication("autoload"),e,!1,e.find(".cmt-click"))}jQuery(document).ready(function(){var e=cmt.api.root.registerApplication("core","cmt.api.Application",{basePath:ajaxUrl});cmt.api.utils.request.register(e,jQuery("[cmt-app=core]"))}),(cmg=cmg||{}).core=cmg.core||{},cmg.logger=cmg.logger||{},cmg.core.controllers=cmg.core.controllers||{},cmg.core.services=cmg.core.services||{},cmg.log=!0,cmg.logger.log=function(e){cmg.log&&console.log(e)},jQuery(document).ready(function(){cmt.api.root.getApplication("core").mapController("address","cmg.core.controllers.AddressController")}),cmg.core.controllers.AddressController=function(){this.app=cmt.api.root.getApplication("core"),this.modelService=this.app.getService("address")},cmg.core.controllers.AddressController.inherits(cmt.api.controllers.RequestController),cmg.core.controllers.AddressController.prototype.getActionSuccess=function(e,t){var o=this.modelService.findContainer(e),r=e.closest(".cmt-address");e.closest(".actions-list-data").slideUp("fast"),this.modelService.initUpdateForm(o,r,t.data)},cmg.core.controllers.AddressController.prototype.addActionSuccess=function(e,t){var o=this.modelService.findContainer(e);this.modelService.add(o,t.data)},cmg.core.controllers.AddressController.prototype.updateActionSuccess=function(e,t){var o=this.modelService.findContainer(e),r=o.find(".cmt-address[data-id="+t.data.cid+"]");this.modelService.refresh(o,r,t.data)},cmg.core.controllers.AddressController.prototype.deleteActionSuccess=function(e,t){var o=this.modelService.findContainer(e),r=o.find(".cmt-address[data-id="+t.data.cid+"]");e.closest(".actions-list-data").slideUp("fast"),this.modelService.remove(o,r)},jQuery(document).ready(function(){cmt.api.root.getApplication("core").mapController("city","cmg.core.controllers.CityController")}),cmg.core.controllers.CityController=function(){},cmg.core.controllers.CityController.inherits(cmt.api.controllers.RequestController),cmg.core.controllers.CityController.prototype.autoSearchActionPre=function(e){var t=e.closest(".cmt-location"),o=e.closest(".auto-fill"),r=o.find(".auto-fill-text").val(),i=o.find(".limit"),c=o.find(".auto-cache");if(r.length<=0)return o.find(".auto-fill-items").slideUp(),o.find(".target").val(""),!1;if(this.singleRequest=!0,0<t.length){var n=t.find(".cmt-location-province"),a=t.find(".cmt-location-region"),l=[];0<n.length&&l.push("provinceId="+n.val()),0<a.length&&l.push("regionId="+a.val()),l.push("name="+r),this.requestData=l.join("&")}else this.requestData="name="+r;return 0<i.length&&(this.requestData+="&limit="+i.val()),0<c.length&&(this.requestData+="&autoCache="+c.val()),!0},cmg.core.controllers.CityController.prototype.autoSearchActionSuccess=function(l,e){var t=e.data,o="",s=l.closest(".auto-fill"),m=s.find(".auto-fill-items");for(i=0;i<t.length;i++){var r=t[i];o+='<li class="auto-fill-item" data-id="'+r.id+'" data-lat="'+r.latitude+'" data-lon="'+r.longitude+'" data-zip="'+r.postal+'">'+r.name+"</li>"}0==o.length?(o='<li class="auto-fill-message">No matching results found.</li>',m.html(o)):(m.html(o),l.find(".auto-fill-item").click(function(){var e=s.find(".target"),t=jQuery(this).attr("data-id"),o=jQuery(this).html(),r=jQuery(this).attr("data-lat"),i=jQuery(this).attr("data-lon"),c=jQuery(this).attr("data-zip");c=c.split(" "),m.slideUp(),e.val(t),l.find(".auto-fill-text").val(o);var n=jQuery(this).closest(".cmt-location"),a=r+","+i;n.find(".search-ll").val(a).trigger("change"),n.find(".address-zip").val(c[0])})),m.slideDown()},jQuery(document).ready(function(){var e=cmt.api.root.getApplication("core");e.mapController("comment","cmg.core.controllers.CommentController"),e.mapController("review","cmg.core.controllers.ReviewController"),e.mapController("feedback","cmg.core.controllers.FeedbackController"),e.mapController("testimonial","cmg.core.controllers.TestimonialController")}),cmg.core.controllers.CommentController=function(){},cmg.core.controllers.CommentController.inherits(cmt.api.controllers.RequestController),cmg.core.controllers.CommentController.prototype.createActionSuccess=function(e,t){e.find(".cmt-rating").cmtRate("reset")},cmg.core.controllers.CommentController.prototype.spamActionPre=function(e,t){return!!confirm("Are you sure you want to submit admin request to mark it as spam?")},cmg.core.controllers.CommentController.prototype.spamActionSuccess=function(e,t){e.closest(".actions-list-data").slideUp()},cmg.core.controllers.CommentController.prototype.approveActionPre=function(e,t){return!!confirm("Are you sure you want to submit admin request to approve it?")},cmg.core.controllers.CommentController.prototype.approveActionSuccess=function(e,t){e.closest(".actions-list-data").slideUp()},cmg.core.controllers.CommentController.prototype.deleteActionPre=function(e,t){return!!confirm("Are you sure you want to submit admin request to delete it?")},cmg.core.controllers.CommentController.prototype.deleteActionSuccess=function(e,t){e.closest(".actions-list-data").slideUp()},cmg.core.controllers.CommentController.prototype.pdeleteActionSuccess=function(e,t){location.reload()},cmg.core.controllers.ReviewController=function(){},cmg.core.controllers.ReviewController.inherits(cmt.api.controllers.RequestController),cmg.core.controllers.ReviewController.prototype.createActionSuccess=function(e,t){e.find(".gallery-review").html(""),e.find(".cmt-rating").cmtRate("reset")},cmg.core.controllers.FeedbackController=function(){},cmg.core.controllers.FeedbackController.inherits(cmt.api.controllers.RequestController),cmg.core.controllers.FeedbackController.prototype.createActionSuccess=function(e,t){e.find(".gallery-feedback").html(""),e.find(".cmt-rating").cmtRate("reset")},cmg.core.controllers.TestimonialController=function(){},cmg.core.controllers.TestimonialController.inherits(cmt.api.controllers.RequestController),cmg.core.controllers.TestimonialController.prototype.createActionSuccess=function(e,t){e.find(".gallery-testimonial").html(""),e.find(".cmt-rating").cmtRate("reset")},jQuery(document).ready(function(){cmt.api.root.getApplication("core").mapController("customData","cmg.core.data.controllers.CustomController")}),cmg.core.data.controllers=cmg.core.data.controllers||{},cmg.core.data.controllers.CustomController=function(){this.app=cmt.api.root.getApplication("core"),this.modelService=this.app.getService("customData")},cmg.core.data.controllers.CustomController.inherits(cmt.api.controllers.RequestController),cmg.core.data.controllers.CustomController.prototype.addActionPre=function(e){return this.requestForm=e.closest(".cmt-data-custom"),!0},cmg.core.data.controllers.CustomController.prototype.addActionSuccess=function(e,t){var o=this.modelService.findContainer(e),r=e.closest(".cmt-data-custom");this.requestForm=null,this.modelService.refresh(o,r,t.data)},cmg.core.data.controllers.CustomController.prototype.updateActionPre=function(e){return this.requestForm=e.closest(".cmt-data-custom"),!0},cmg.core.data.controllers.CustomController.prototype.updateActionSuccess=function(e,t){var o=this.modelService.findContainer(e),r=e.closest(".cmt-data-custom");this.requestForm=null,this.modelService.refresh(o,r,t.data)},cmg.core.data.controllers.CustomController.prototype.deleteActionPre=function(e){return this.requestForm=e.closest(".cmt-data-custom"),!0},cmg.core.data.controllers.CustomController.prototype.deleteActionSuccess=function(e,t){var o=this.modelService.findContainer(e),r=e.closest(".cmt-data-custom");this.requestForm=null,this.modelService.remove(o,r)},jQuery(document).ready(function(){cmt.api.root.getApplication("core").mapController("file","cmg.core.controllers.FileController")}),cmg.core.controllers.FileController=function(){this.app=cmt.api.root.getApplication("core"),this.modelService=this.app.getService("file")},cmg.core.controllers.FileController.inherits(cmt.api.controllers.RequestController),cmg.core.controllers.FileController.prototype.assignActionSuccess=function(e,t){e.closest(".cmt-file-uploader").find(".post-action").hide()},cmg.core.controllers.FileController.prototype.clearActionPre=function(e){var t=e.closest(".cmt-file-uploader"),o=t.find(".id");return 0<o.length&&0<o.val().length&&0<parseInt(o.val())||(this.modelService.clear(t),!1)},cmg.core.controllers.FileController.prototype.clearActionSuccess=function(e,t){var o=e.closest(".cmt-file-uploader");this.modelService.clear(o)},cmg.core.controllers.FileController.prototype.clearActionFailure=function(e,t){var o=e.closest(".cmt-file-uploader");this.modelService.clear(o)},jQuery(document).ready(function(){cmt.api.root.getApplication("core").mapController("follower","cmg.core.controllers.FollowerController")}),cmg.core.controllers.FollowerController=function(){this.app=cmt.api.root.getApplication("core"),this.modelService=this.app.getService("follower")},cmg.core.controllers.FollowerController.inherits(cmt.api.controllers.RequestController),cmg.core.controllers.FollowerController.prototype.likeActionPre=function(e,t){return!0},cmg.core.controllers.FollowerController.prototype.likeActionSuccess=function(e,t){var o=t.data.follower,r=t.data.counts;this.modelService.processClasses(e,o,r)},cmg.core.controllers.FollowerController.prototype.dislikeActionPre=function(e,t){return!0},cmg.core.controllers.FollowerController.prototype.dislikeActionSuccess=function(e,t){var o=t.data.follower,r=t.data.counts;this.modelService.processClasses(e,o,r)},cmg.core.controllers.FollowerController.prototype.followActionPre=function(e,t){return!0},cmg.core.controllers.FollowerController.prototype.followActionSuccess=function(e,t){var o=t.data.follower,r=t.data.counts;this.modelService.processClasses(e,o,r)},cmg.core.controllers.FollowerController.prototype.wishActionPre=function(e,t){return!0},cmg.core.controllers.FollowerController.prototype.wishActionSuccess=function(e,t){var o=t.data.follower,r=t.data.counts;this.modelService.processClasses(e,o,r)},jQuery(document).ready(function(){cmt.api.root.getApplication("core").mapController("galleryItem","cmg.core.gallery.controllers.ItemController")}),cmg.core.gallery.controllers=cmg.core.gallery.controllers||{},cmg.core.gallery.controllers.ItemController=function(){this.app=cmt.api.root.getApplication("core"),this.modelService=this.app.getService("galleryItem")},cmg.core.gallery.controllers.ItemController.inherits(cmt.api.controllers.RequestController),cmg.core.gallery.controllers.ItemController.prototype.getActionSuccess=function(e,t){var o=this.modelService.findContainer(e),r=e.closest(".cmt-gallery-item");e.closest(".actions-list-data").slideUp("fast"),this.modelService.initUpdateForm(o,r,t.data)},cmg.core.gallery.controllers.ItemController.prototype.addActionSuccess=function(e,t){var o=this.modelService.findContainer(e);this.modelService.add(o,t.data)},cmg.core.gallery.controllers.ItemController.prototype.updateActionSuccess=function(e,t){var o=this.modelService.findContainer(e),r=o.find(".cmt-gallery-item[data-id="+t.data.mid+"]");this.modelService.refresh(o,r,t.data)},cmg.core.gallery.controllers.ItemController.prototype.deleteActionSuccess=function(e,t){var o=this.modelService.findContainer(e),r=o.find(".cmt-gallery-item[data-id="+t.data.mid+"]");e.closest(".actions-list-data").slideUp("fast"),this.modelService.remove(o,r)},jQuery(document).ready(function(){cmt.api.root.getApplication("core").mapController("location","cmg.core.controllers.LocationController")}),cmg.core.controllers.LocationController=function(){this.app=cmt.api.root.getApplication("core"),this.modelService=this.app.getService("location")},cmg.core.controllers.LocationController.inherits(cmt.api.controllers.RequestController),cmg.core.controllers.LocationController.prototype.getActionSuccess=function(e,t){var o=this.modelService.findContainer(e),r=e.closest(".cmt-location");e.closest(".actions-list-data").slideUp("fast"),this.modelService.initUpdateForm(o,r,t.data)},cmg.core.controllers.LocationController.prototype.addActionSuccess=function(e,t){var o=this.modelService.findContainer(e);this.modelService.add(o,t.data)},cmg.core.controllers.LocationController.prototype.updateActionSuccess=function(e,t){var o=this.modelService.findContainer(e),r=o.find(".cmt-location[data-id="+t.data.cid+"]");this.modelService.refresh(o,r,t.data)},cmg.core.controllers.LocationController.prototype.deleteActionSuccess=function(e,t){var o=this.modelService.findContainer(e),r=o.find(".cmt-location[data-id="+t.data.cid+"]");e.closest(".actions-list-data").slideUp("fast"),this.modelService.remove(o,r)},jQuery(document).ready(function(){cmt.api.root.getApplication("core").mapController("main","cmg.core.controllers.MainController")}),cmg.core.controllers.MainController=function(){},cmg.core.controllers.MainController.inherits(cmt.api.controllers.RequestController),jQuery(document).ready(function(){var e=cmt.api.root.getApplication("core");e.mapController("autoMapper","cmg.core.mapper.controllers.AutoController"),e.mapController("modelMapper","cmg.core.mapper.controllers.ModelController"),e.mapController("csvMapper","cmg.core.mapper.controllers.CsvController")}),cmg.core.mapper.controllers=cmg.core.mapper.controllers||{},cmg.core.mapper.controllers.AutoController=function(){this.singleRequest=!0,this.previousLocation=null},cmg.core.mapper.controllers.AutoController.inherits(cmt.api.controllers.RequestController),cmg.core.mapper.controllers.AutoController.prototype.autoSearchActionPre=function(e){var t=e.closest(".auto-fill"),o=t.find(".search-name").val(),r=t.find(".search-type");return o.length<=0?(t.find(".auto-fill-items").slideUp(),t.find(".auto-fill-target .target").val(""),!1):(1==r.length?this.requestData="name="+o+"&type="+r.val():this.requestData="name="+o,!0)},cmg.core.mapper.controllers.AutoController.prototype.autoSearchActionSuccess=function(r,e){var t=e.data,o="",c=r.find(".auto-fill-items");for(i=0;i<t.length;i++){var n=t[i];o+="<li class='auto-fill-item' data-id='"+n.id+"'>"+n.name+"</li>"}0==o.length?(o="<li class='auto-fill-message'>No matching results found.</li>",c.html(o)):(c.html(o),r.find(".auto-fill-item").click(function(){var e=r.closest(".auto-fill").find(".auto-fill-target"),t=jQuery(this).attr("data-id"),o=jQuery(this).html();c.slideUp(),e.find(".target").val(t),r.find(".auto-fill-text").val(o)})),c.slideDown()},cmg.core.mapper.controllers.ModelController=function(){},cmg.core.mapper.controllers.ModelController.inherits(cmt.api.controllers.RequestController),cmg.core.mapper.controllers.ModelController.prototype.autoSearchActionPre=function(e){var t=e.closest(".auto-fill"),o=t.find("input[name=type]"),r=t.find(".auto-fill-text").val(),i=e.closest(".mapper-auto-items").find(".mapper-items").find(".mapper-item").length,c=e.closest(".mapper-auto-items").attr("limit");return r.length<=0?(t.find(".auto-fill-items").slideUp(),t.find(".trigger-map-item input[name=itemId]").val(""),!1):(null!==c&&parseInt(c)<=i&&alert("No more mappings allowed."),1==o.length?this.requestData="name="+r+"&type="+o.val():this.requestData="name="+r,!0)},cmg.core.mapper.controllers.ModelController.prototype.autoSearchActionSuccess=function(e,t){var o=t.data,r="",c=e.closest(".auto-fill"),n=e.find(".auto-fill-items"),a=e.attr("autoSubmit")||"yes",l=e.attr("template")||"";for(i=0;i<o.length;i++){var s=o[i];r+='<li class="auto-fill-item" data-id="'+s.id+'">'+s.name+"</li>"}0==r.length?(r='<li class="auto-fill-message">No matching results found.</li>',n.html(r)):(n.html(r),e.find(".auto-fill-item").click(function(){var e=jQuery(this).attr("data-id"),t=jQuery(this).html();n.slideUp(),"yes"===a?(c.find(".trigger-map-item input[name=itemId]").val(e),c.find(".trigger-map-item .cmt-click")[0].click()):cmt.api.root.getApplication("core").getService("autoMapper").processAutoSearch(e,t,l)})),n.slideDown()},cmg.core.mapper.controllers.ModelController.prototype.mapItemActionPre=function(e){var t=e.find("input[name=itemId]").val();return 0<(t=parseInt(t))},cmg.core.mapper.controllers.ModelController.prototype.mapItemActionSuccess=function(e,t){var o=e.closest(".mapper-auto-items"),r=document.getElementById(o.attr("template")).innerHTML,i=Handlebars.compile(r),c=o.find(".mapper-items"),n=c.find(".mapper-item"),a=n.length,l=t.data.cid,s=t.data.name;o.find(".search-name").val("");for(var m=!0,d=0;d<a;d++){if(l==jQuery(n[d]).find(".cid").val()){m=!1;break}}if(m){var p=i({cid:l,name:s});c.append(p),a=(n=c.find(".mapper-item")).length,cmt.api.utils.request.register(cmt.api.root.getApplication("core"),n.last())}},cmg.core.mapper.controllers.ModelController.prototype.deleteItemActionSuccess=function(e,t){e.remove()},cmg.core.mapper.controllers.ModelController.prototype.toggleItemActionSuccess=function(e,t){},cmg.core.mapper.controllers.CsvController=function(){},cmg.core.mapper.controllers.CsvController.inherits(cmt.api.controllers.RequestController),cmg.core.mapper.controllers.CsvController.prototype.mapItemActionSuccess=function(e,t){var o=jQuery(".mapper-submit-items"),r=o.find(".mapper-items"),i=document.getElementById(o.attr("template")).innerHTML,c=Handlebars.compile(i)({list:t.data});r.html(c),cmt.api.utils.request.register(cmt.api.root.getApplication("core"),r.find("[cmt-app=core]"))},cmg.core.mapper.controllers.CsvController.prototype.deleteItemActionSuccess=function(e,t){e.remove()},jQuery(document).ready(function(){cmt.api.root.getApplication("core").mapController("meta","cmg.core.controllers.MetaController")}),cmg.core.controllers.MetaController=function(){this.app=cmt.api.root.getApplication("core"),this.modelService=this.app.getService("meta")},cmg.core.controllers.MetaController.inherits(cmt.api.controllers.RequestController),cmg.core.controllers.MetaController.prototype.getActionSuccess=function(e,t){var o=this.modelService.findContainer(e),r=e.closest(".cmt-meta");e.closest(".actions-list-data").slideUp("fast"),this.modelService.initUpdateForm(o,r,t.data)},cmg.core.controllers.MetaController.prototype.addActionSuccess=function(e,t){var o=this.modelService.findContainer(e);this.modelService.add(o,t.data)},cmg.core.controllers.MetaController.prototype.updateActionSuccess=function(e,t){var o=this.modelService.findContainer(e),r=o.find(".cmt-meta[data-id="+t.data.id+"]");this.modelService.refresh(o,r,t.data)},cmg.core.controllers.MetaController.prototype.deleteActionSuccess=function(e,t){var o=this.modelService.findContainer(e),r=o.find(".cmt-meta[data-id="+t.data.id+"]");e.closest(".actions-list-data").slideUp("fast"),this.modelService.remove(o,r)},cmg.core.controllers.MetaController.prototype.toggleActionSuccess=function(e,t){},jQuery(document).ready(function(){cmt.api.root.getApplication("core").mapController("model","cmg.core.controllers.ModelController")}),cmg.core.controllers.ModelController=function(){this.app=cmt.api.root.getApplication("core"),this.modelService=this.app.getService("model")},cmg.core.controllers.ModelController.inherits(cmt.api.controllers.RequestController),cmg.core.controllers.ModelController.prototype.getActionSuccess=function(e,t){var o=this.modelService.findContainer(e),r=e.closest(".cmt-model");e.closest(".actions-list-data").slideUp("fast"),this.modelService.initUpdateForm(o,r,t.data)},cmg.core.controllers.ModelController.prototype.addActionSuccess=function(e,t){var o=this.modelService.findContainer(e);this.modelService.add(o,t.data)},cmg.core.controllers.ModelController.prototype.updateActionSuccess=function(e,t){var o=this.modelService.findContainer(e),r=o.find(".cmt-model[data-id="+t.data.id+"]");this.modelService.refresh(o,r,t.data)},cmg.core.controllers.ModelController.prototype.deleteActionSuccess=function(e,t){var o=this.modelService.findContainer(e),r=o.find(".cmt-model[data-id="+t.data.id+"]");e.closest(".actions-list-data").slideUp("fast"),this.modelService.remove(o,r)},jQuery(document).ready(function(){cmt.api.root.getApplication("core").mapController("province","cmg.core.controllers.ProvinceController"),jQuery(".cmt-location-province").change(function(){var e=jQuery(this).closest(".cmt-location").find(".cmt-location-city-fill");e.find(".target").val(""),e.find(".auto-fill-text").val("")})}),cmg.core.controllers.ProvinceController=function(){},cmg.core.controllers.ProvinceController.inherits(cmt.api.controllers.BaseController),cmg.core.controllers.ProvinceController.prototype.optionsListActionPre=function(e){var t=e.find("select");return this.requestData="countryId="+t.val(),cmt.utils.data.hasAttribute(t,"data-province")&&(this.requestData+="&provinceId="+t.attr("data-province")),!0},cmg.core.controllers.ProvinceController.prototype.optionsListActionSuccess=function(e,t){var o=e.closest(".cmt-location").find(".cmt-location-provinces .cmt-select-wrap");jQuery.fn.cmtSelect.resetSelect(o,t.data)},jQuery(document).ready(function(){cmt.api.root.getApplication("core").mapController("region","cmg.core.controllers.RegionController"),jQuery(".cmt-location-region").change(function(){var e=jQuery(this).closest(".cmt-location").find(".cmt-location-city-fill");e.find(".target").val(""),e.find(".auto-fill-text").val("")})}),cmg.core.controllers.RegionController=function(){},cmg.core.controllers.RegionController.inherits(cmt.api.controllers.BaseController),cmg.core.controllers.RegionController.prototype.optionsListActionPre=function(e){var t=e.find("select");return this.requestData="provinceId="+t.val(),cmt.utils.data.hasAttribute(t,"data-region")&&(this.requestData+="&regionId="+t.attr("data-region")),!0},cmg.core.controllers.RegionController.prototype.optionsListActionSuccess=function(e,t){var o=e.closest(".cmt-location").find(".cmt-location-regions .cmt-select-wrap");jQuery.fn.cmtSelect.resetSelect(o,t.data)},jQuery(document).ready(function(){cmt.api.root.getApplication("core").mapController("site","cmg.core.controllers.SiteController")}),cmg.core.controllers.SiteController=function(){},cmg.core.controllers.SiteController.inherits(cmt.api.controllers.RequestController),jQuery(document).ready(function(){cmt.api.root.getApplication("core").mapController("socialData","cmg.core.data.controllers.SocialController")}),cmg.core.data.controllers.SocialController=function(){this.app=cmt.api.root.getApplication("core"),this.modelService=this.app.getService("socialData")},cmg.core.data.controllers.SocialController.inherits(cmt.api.controllers.RequestController),cmg.core.data.controllers.SocialController.prototype.addActionPre=function(e){return this.requestForm=e.closest(".cmt-data-social"),!0},cmg.core.data.controllers.SocialController.prototype.addActionSuccess=function(e,t){var o=this.modelService.findContainer(e),r=e.closest(".cmt-data-social");this.requestForm=null,this.modelService.refresh(o,r,t.data)},cmg.core.data.controllers.SocialController.prototype.updateActionPre=function(e){return this.requestForm=e.closest(".cmt-data-social"),!0},cmg.core.data.controllers.SocialController.prototype.updateActionSuccess=function(e,t){var o=this.modelService.findContainer(e),r=e.closest(".cmt-data-social");this.requestForm=null,this.modelService.refresh(o,r,t.data)},cmg.core.data.controllers.SocialController.prototype.deleteActionPre=function(e){return this.requestForm=e.closest(".cmt-data-social"),!0},cmg.core.data.controllers.SocialController.prototype.deleteActionSuccess=function(e,t){var o=this.modelService.findContainer(e),r=e.closest(".cmt-data-social");this.requestForm=null,this.modelService.remove(o,r)},jQuery(document).ready(function(){cmt.api.root.getApplication("core").mapController("user","cmg.core.controllers.UserController")}),cmg.core.controllers.UserController=function(){},cmg.core.controllers.UserController.inherits(cmt.api.controllers.RequestController),cmg.core.controllers.UserController.prototype.assignAvatarActionSuccess=function(e,t){var o=e.closest(".file-uploader");jQuery(".popout-group-main .wrap-user .fa-user").remove(),jQuery(".popout-group-main .wrap-user .user-avatar").remove(),jQuery(".popout-group-main .wrap-user").prepend('<img class="user-avatar" src="'+t.data.thumbUrl+'" />'),o.find(".post-action").hide()},cmg.core.controllers.UserController.prototype.clearAvatarActionSuccess=function(e,t){var o=e.closest(".file-uploader");jQuery(".popout-group-main .wrap-user .fa-user").remove(),jQuery(".popout-group-main .wrap-user .user-avatar").remove(),jQuery(".popout-group-main .wrap-user").prepend('<span class="fa fa-user icon"></span>'),o.find(".file-wrap .file-data").html('<i class="cmti cmti-5x cmti-user"></i>'),o.find(".file-clear").hide(),o.find(".post-action").hide()},cmg.core.controllers.UserController.prototype.profileActionSuccess=function(e,t){},cmg.core.controllers.UserController.prototype.accountActionSuccess=function(e,t){e.find(".data-crud-wrap .hidden-easy").removeClass("hidden-easy")},cmg.core.controllers.UserController.prototype.addressActionSuccess=function(e,t){},cmg.core.controllers.UserController.prototype.settingsActionSuccess=function(e,t){},cmg.core.controllers.UserController.prototype.autoSearchActionPre=function(e){var t=e.closest(".auto-fill"),o=t.find(".search-name").val(),r=t.find(".search-type");return o.length<=0?(t.find(".auto-fill-items").slideUp(),t.find(".auto-fill-target .target").val(""),!1):(1==r.length?this.requestData="name="+o+"&type="+r.val():this.requestData="name="+o,!0)},cmg.core.controllers.UserController.prototype.autoSearchActionSuccess=function(r,e){var t=e.data,o="",c=r.find(".auto-fill-items");for(i=0;i<t.length;i++){var n=t[i];o+='<li class="auto-fill-item" data-id="'+n.id+'">'+n.name+", "+n.email+"</li>"}0==o.length?(o="<li class='auto-fill-message'>No matching results found.</li>",c.html(o)):(c.html(o),r.find(".auto-fill-item").click(function(){var e=r.closest(".auto-fill").find(".auto-fill-target"),t=jQuery(this).attr("data-id"),o=(jQuery(this).attr("data-name"),jQuery(this).attr("data-email"),jQuery(this).html());c.slideUp(),e.find(".target").val(t),r.find(".auto-fill-text").val(o)})),c.slideDown()},jQuery(document).ready(function(){var e=cmt.api.root.getApplication("core");e.mapService("address","cmg.core.services.AddressService"),e.getService("address").initListeners(),e.getService("address").refreshGoogleMap(jQuery(".frm-address"))}),cmg.core.services.AddressService=function(){this.addTemplate="addAddressTemplate",this.updateTemplate="updateAddressTemplate",this.viewTemplate="addressViewTemplate",this.refreshTemplate="addressRefreshTemplate"},cmg.core.services.AddressService.inherits(cmt.api.services.BaseService),cmg.core.services.AddressService.prototype.initListeners=function(){var t=this,e=jQuery(".cmt-address-add");0!=e.length&&e.click(function(){var e=jQuery(this).closest(".cmt-address-crud");t.initAddForm(e)})},cmg.core.services.AddressService.prototype.initAddForm=function(e){var t=document.getElementById(this.addTemplate).innerHTML,o=Handlebars.compile(t)({}),r=e.find(".cmt-address-form");r.hide(),r.html(o),cmt.api.utils.request.registerTargetApp("core",r),cmt.utils.ui.initSelectElement(r.find(".cmt-select")),r.find(".cmt-address-close").click(function(){r.fadeOut("fast")}),this.refreshGoogleMap(r),this.clearCity(r),r.find(".intl-tel-field").each(function(){cmt.utils.intltel.initIntlTelField(jQuery(this))}),r.fadeIn("slow")},cmg.core.services.AddressService.prototype.initUpdateForm=function(e,t,o){var r=document.getElementById(this.updateTemplate).innerHTML,i=Handlebars.compile(r)(o),c=e.find(".cmt-address-form");c.hide(),c.html(i),cmt.api.utils.request.registerTargetApp("core",c);var n=c.find(".cmt-location-country"),a=c.find(".cmt-location-province"),l=c.find(".cmt-location-region");n.val(n.attr("cid")),a.val(a.attr("pid")),1===l.length&&l.val(l.attr("rid")),c.find(".cmt-address-type").val(o.ctype),cmt.utils.ui.initSelectElement(c.find(".cmt-select")),c.find(".cmt-address-close").click(function(){c.fadeOut("fast")}),this.refreshGoogleMap(c),this.clearCity(c),c.find(".intl-tel-field").each(function(){cmt.utils.intltel.initIntlTelField(jQuery(this))}),c.fadeIn("slow"),this.refreshProvinces(c,a.attr("pid")),this.refreshRegions(c,l.attr("rid"))},cmg.core.services.AddressService.prototype.add=function(e,t){var o=document.getElementById(this.viewTemplate).innerHTML,r=Handlebars.compile(o)(t),i=e.find(".cmt-address-collection");i.prepend(r);var c=i.find(".cmt-address").first();cmt.api.utils.request.registerTargetApp("core",c),cmt.utils.ui.initActionsElement(c.find(".cmt-actions")),e.find(".cmt-address-form").slideUp("slow")},cmg.core.services.AddressService.prototype.refresh=function(e,t,o){var r=document.getElementById(this.refreshTemplate).innerHTML,i=Handlebars.compile(r)(o);t.find(".cmt-address-header .title").html(o.title),t.find(".cmt-address-data").replaceWith(i),e.find(".cmt-address-form").slideUp("slow")},cmg.core.services.AddressService.prototype.remove=function(e,t){var o=t.find(".cmt-actions");if(0<o.length){var r=o.attr("data-idx");jQuery("#actions-list-data-"+r).remove()}t.remove()},cmg.core.services.AddressService.prototype.findContainer=function(e){var t=e.closest(".cmt-address-crud");if(0==t.length){var o=e.closest(".actions-list-data");if(1==o.length){var r=o.attr("data-idx");t=jQuery("#actions-list-"+r).closest(".cmt-address-crud")}}return t},cmg.core.services.AddressService.prototype.refreshProvinces=function(e,t){e.find(".cmt-location-country").attr("data-province",t),e.find(".cmt-location-country").closest(".cmt-location-countries").find(".cmt-click").trigger("click")},cmg.core.services.AddressService.prototype.refreshRegions=function(e,t){e.find(".cmt-location-province").attr("data-region",t),e.find(".cmt-location-province").closest(".cmt-location-provinces").find(".cmt-click").trigger("click")},cmg.core.services.AddressService.prototype.clearCity=function(e){e.find(".cmt-location-province, .cmt-location-region").change(function(){var e=jQuery(this).closest(".cmt-location").find(".cmt-location-city-fill");e.find(".target").val(""),e.find(".auto-fill-text").val("")})},cmg.core.services.AddressService.prototype.refreshGoogleMap=function(e){jQuery(e).find(".lat-long-picker").latLongPicker(),jQuery(e).find(".cmt-location-ll-picker .line1, .cmt-location-ll-picker .line2, .cmt-location-ll-picker .line3, .cmt-location-ll-picker .city, .cmt-location-ll-picker .zip").keyup(function(){var e=jQuery(this).closest(".frm-address"),t=e.find(".cmt-location-country").find(":selected").text(),o=e.find(".cmt-location-province").find(":selected").text(),r=jQuery(".cmt-location-ll-picker .line1").val(),i=jQuery(".cmt-location-ll-picker .line2").val(),c=jQuery(".cmt-location-ll-picker .city").val(),n=jQuery(".cmt-location-ll-picker .zip").val(),a=[];0<r.length&&a.push(r),0<i.length&&a.push(i),0<c.length&&a.push(c),0<t.length&&a.push(t),0<o.length&&a.push(o),0<n.length&&a.push(n);var l=a.join();10<l.length&&jQuery(".cmt-location-ll-picker .search-box").val(l).trigger("change")})},jQuery(document).ready(function(){var e=cmt.api.root.getApplication("core");e.mapService("customData","cmg.core.data.services.CustomService"),e.getService("customData").initListeners()}),(cmg=cmg||{}).core=cmg.core||{},cmg.core.data=cmg.core.data||{},cmg.core.data.services=cmg.core.data.services||{},cmg.core.data.services.CustomService=function(){this.addTemplate="addCustomDataTemplate",this.refreshTemplate="refreshCustomDataTemplate"},cmg.core.data.services.CustomService.inherits(cmt.api.services.BaseService),cmg.core.data.services.CustomService.prototype.initListeners=function(){var t=this,e=jQuery(".cmt-data-custom-add");0!=e.length&&e.click(function(){var e=jQuery(this).closest(".cmt-data-custom-crud");t.initAddForm(e)})},cmg.core.data.services.CustomService.prototype.initAddForm=function(e){var t=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),o=document.getElementById(this.addTemplate).innerHTML,r=Handlebars.compile(o)({key:t});e.find(".cmt-data-custom-collection").append(r);var i=e.find(".cmt-data-custom").last();cmt.api.utils.request.registerTargetApp("core",i),i.find(".btn-remove").click(function(){i.remove()})},cmg.core.data.services.CustomService.prototype.refresh=function(e,t,o){var r=document.getElementById(this.refreshTemplate).innerHTML,i=Handlebars.compile(r)(o);t.html(i),cmt.api.utils.request.registerTargetApp("core",t)},cmg.core.data.services.CustomService.prototype.remove=function(e,t){var o=t.find(".cmt-actions");if(0<o.length){var r=o.attr("data-idx");jQuery("#actions-list-data-"+r).remove()}t.remove()},cmg.core.data.services.CustomService.prototype.findContainer=function(e){var t=e.closest(".cmt-data-custom-crud");if(0==t.length){var o=e.closest(".actions-list-data");if(1==o.length){var r=o.attr("data-idx");t=jQuery("#actions-list-"+r).closest(".cmt-data-custom-crud")}}return t},jQuery(document).ready(function(){var e=cmt.api.root.getApplication("core");e.mapService("file","cmg.core.services.FileService"),e.getService("file").initListeners()}),cmg.core.services.FileService=function(){},cmg.core.services.FileService.inherits(cmt.api.services.BaseService),cmg.core.services.FileService.prototype.initListeners=function(){},cmg.core.services.FileService.prototype.findContainer=function(e){var t=e.closest(".cmt-file-crud");if(0==t.length){var o=e.closest(".actions-list-data");if(1==o.length){var r=o.attr("data-idx");t=jQuery("#actions-list-"+r).closest(".cmt-file-crud")}}return t},cmg.core.services.FileService.prototype.clear=function(e){var t=e.attr("type");switch(t="avatar"==e.attr("directory")?"avatar":t){case"avatar":e.find(".file-wrap .file-data").html('<i class="cmti cmti-5x cmti-user"></i>');break;case"image":e.find(".file-wrap .file-data").html('<i class="cmti cmti-5x cmti-image"></i>');break;case"video":e.find(".file-wrap .file-data").html('<i class="cmti cmti-5x cmti-file-video"></i>');break;case"compressed":e.find(".file-wrap .file-data").html('<i class="cmti cmti-5x cmti-file-archive"></i>');break;default:e.find(".file-wrap .file-data").html('<i class="icon cmti cmti-5x cmti-file"></i>')}e.find(".id").val(""),e.find(".change").val(""),e.find(".name").val(""),e.find(".file-clear").hide(),e.find(".post-action").hide()},jQuery(document).ready(function(){var e=cmt.api.root.getApplication("core");e.mapService("follower","cmg.core.services.FollowerService"),e.getService("follower").initListeners()}),cmg.core.services.FollowerService=function(){},cmg.core.services.FollowerService.inherits(cmt.api.services.BaseService),cmg.core.services.FollowerService.prototype.initListeners=function(){},cmg.core.services.FollowerService.prototype.processClasses=function(e,t,o){var r=e.attr("data-class-up"),i=e.attr("data-class-down"),c=e.attr("data-class-model"),n=jQuery("."+c+"-"+t.parentId+" .icon");t.active?(n.removeClass(i),n.addClass(r)):(n.removeClass(r),n.addClass(i))},jQuery(document).ready(function(){var e=cmt.api.root.getApplication("core");e.mapService("galleryItem","cmg.core.gallery.services.ItemService"),e.getService("galleryItem").initListeners()}),(cmg=cmg||{}).core=cmg.core||{},cmg.core.gallery=cmg.core.gallery||{},cmg.core.gallery.services=cmg.core.gallery.services||{},cmg.core.gallery.services.ItemService=function(){this.addTemplate="addItemTemplate",this.updateTemplate="updateItemTemplate",this.viewTemplate="itemViewTemplate",this.refreshTemplate="itemRefreshTemplate",this.hiddenForm=!0},cmg.core.gallery.services.ItemService.inherits(cmt.api.services.BaseService),cmg.core.gallery.services.ItemService.prototype.initListeners=function(){var t=this,e=jQuery(".cmt-gallery-item-add");0!=e.length&&e.click(function(){var e=jQuery(this).closest(".cmt-gallery-item-crud");t.initAddForm(e)})},cmg.core.gallery.services.ItemService.prototype.initAddForm=function(e){var t=document.getElementById(this.addTemplate).innerHTML,o=Handlebars.compile(t)({}),r=e.find(".cmt-gallery-item-form");r.hide(),r.html(o),cmt.api.utils.request.registerTargetApp("core",r),r.find(".cmt-gallery-item-uploader").cmtFileUploader(),r.find(".cmt-gallery-item-close").click(function(){r.fadeOut("fast")}),r.fadeIn("slow")},cmg.core.gallery.services.ItemService.prototype.initUpdateForm=function(e,t,o){var r=this,i=document.getElementById(this.updateTemplate).innerHTML,c=Handlebars.compile(i)(o),n=e.find(".cmt-gallery-item-form");n.hide(),n.html(c),cmt.api.utils.request.registerTargetApp("core",n),n.find(".file-data").html(t.find(".cmt-gallery-item-data").html()),n.find(".cmt-gallery-item-uploader").cmtFileUploader(),n.find(".cmt-gallery-item-close").click(function(){r.hiddenForm?n.fadeOut("fast"):r.initAddForm(e)}),n.fadeIn("slow")},cmg.core.gallery.services.ItemService.prototype.add=function(e,t){var o=document.getElementById(this.viewTemplate).innerHTML,r=Handlebars.compile(o)(t),i=e.find(".cmt-gallery-item-collection"),c=null;switch(cmt.utils.data.hasAttribute(e,"data-layout")?e.attr("data-layout"):null){case"cmt-layout-slider":i.cmtSlider("addSlide",r),c=i.find(".cmt-gallery-item[data-idx=0]");break;default:i.prepend(r),c=i.find(".cmt-gallery-item").first()}cmt.api.utils.request.registerTargetApp("core",c),cmt.utils.ui.initActionsElement(c.find(".cmt-actions")),this.hiddenForm?e.find(".cmt-gallery-item-form").fadeOut("fast"):this.initAddForm(e)},cmg.core.gallery.services.ItemService.prototype.refresh=function(e,t,o){var r=document.getElementById(this.refreshTemplate).innerHTML,i=Handlebars.compile(r)(o);t.find(".cmt-gallery-item-header .title").html(o.title),t.find(".cmt-gallery-item-data").replaceWith(i),this.hiddenForm?e.find(".cmt-gallery-item-form").fadeOut("fast"):this.initAddForm(e)},cmg.core.gallery.services.ItemService.prototype.remove=function(e,t){var o=t.find(".cmt-actions"),r=e.find(".cmt-gallery-item-collection"),i=cmt.utils.data.hasAttribute(e,"data-layout")?e.attr("data-layout"):null;if(0<o.length){var c=o.attr("data-idx");jQuery("#actions-list-data-"+c).remove()}switch(i){case"cmt-layout-slider":r.cmtSlider("removeSlide",parseInt(t.attr("data-idx")));break;default:t.remove()}},cmg.core.gallery.services.ItemService.prototype.findContainer=function(e){var t=e.closest(".cmt-gallery-item-crud");if(0==t.length){var o=e.closest(".actions-list-data");if(1==o.length){var r=o.attr("data-idx");t=jQuery("#actions-list-"+r).closest(".cmt-gallery-item-crud")}}return t},jQuery(document).ready(function(){var e=cmt.api.root.getApplication("core");e.mapService("location","cmg.core.services.LocationService"),e.getService("location").initListeners(),e.getService("location").refreshGoogleMap(jQuery(".frm-location"))}),cmg.core.services.LocationService=function(){this.addTemplate="addLocationTemplate",this.updateTemplate="updateLocationTemplate",this.viewTemplate="locationViewTemplate",this.refreshTemplate="locationRefreshTemplate"},cmg.core.services.LocationService.inherits(cmt.api.services.BaseService),cmg.core.services.LocationService.prototype.initListeners=function(){var t=this,e=jQuery(".cmt-location-add");0!=e.length&&e.click(function(){var e=jQuery(this).closest(".cmt-location-crud");t.initAddForm(e)})},cmg.core.services.LocationService.prototype.initAddForm=function(e){var t=document.getElementById(this.addTemplate).innerHTML,o=Handlebars.compile(t)({}),r=e.find(".cmt-location-form");r.hide(),r.html(o),cmt.api.utils.request.registerTargetApp("core",r),cmt.utils.ui.initSelectElement(r.find(".cmt-select")),r.find(".cmt-location-close").click(function(){r.fadeOut("fast")}),this.refreshGoogleMap(r),this.clearCity(r),r.fadeIn("slow")},cmg.core.services.LocationService.prototype.initUpdateForm=function(e,t,o){var r=document.getElementById(this.updateTemplate).innerHTML,i=Handlebars.compile(r)(o),c=e.find(".cmt-location-form");c.hide(),c.html(i),cmt.api.utils.request.registerTargetApp("core",c);var n=c.find(".cmt-location-country"),a=c.find(".cmt-location-province"),l=c.find(".cmt-location-region");n.val(n.attr("cid")),a.val(a.attr("pid")),1===l.length&&l.val(l.attr("rid")),c.find(".cmt-location-type").val(o.type),cmt.utils.ui.initSelectElement(c.find(".cmt-select")),c.find(".cmt-location-close").click(function(){c.fadeOut("fast")}),this.refreshGoogleMap(c),this.clearCity(c),c.fadeIn("slow"),this.refreshProvinces(c,a.attr("pid")),this.refreshRegions(c,l.attr("rid"))},cmg.core.services.LocationService.prototype.add=function(e,t){var o=document.getElementById(this.viewTemplate).innerHTML,r=Handlebars.compile(o)(t),i=e.find(".cmt-location-collection");i.prepend(r);var c=i.find(".cmt-location").first();cmt.api.utils.request.registerTargetApp("core",c),cmt.utils.ui.initActionsElement(c.find(".cmt-actions")),e.find(".cmt-location-form").slideUp("slow")},cmg.core.services.LocationService.prototype.refresh=function(e,t,o){var r=document.getElementById(this.refreshTemplate).innerHTML,i=Handlebars.compile(r)(o);t.find(".cmt-location-header .title").html(o.title),t.find(".cmt-location-data").replaceWith(i),e.find(".cmt-location-form").slideUp("slow")},cmg.core.services.LocationService.prototype.remove=function(e,t){var o=t.find(".cmt-actions");if(0<o.length){var r=o.attr("data-idx");jQuery("#actions-list-data-"+r).remove()}t.remove()},cmg.core.services.LocationService.prototype.findContainer=function(e){var t=e.closest(".cmt-location-crud");if(0==t.length){var o=e.closest(".actions-list-data");if(1==o.length){var r=o.attr("data-idx");t=jQuery("#actions-list-"+r).closest(".cmt-location-crud")}}return t},cmg.core.services.LocationService.prototype.refreshProvinces=function(e,t){e.find(".cmt-location-country").attr("data-province",t),e.find(".cmt-location-country").closest(".cmt-location-countries").find(".cmt-click").trigger("click")},cmg.core.services.LocationService.prototype.refreshRegions=function(e,t){e.find(".cmt-location-province").attr("data-region",t),e.find(".cmt-location-province").closest(".cmt-location-provinces").find(".cmt-click").trigger("click")},cmg.core.services.LocationService.prototype.clearCity=function(e){e.find(".cmt-location-province, .cmt-location-region").change(function(){var e=jQuery(this).closest(".cmt-location").find(".cmt-location-city-fill");e.find(".target").val(""),e.find(".auto-fill-text").val("")})},cmg.core.services.LocationService.prototype.refreshGoogleMap=function(e){jQuery(e).find(".lat-long-picker").latLongPicker(),jQuery(e).find(".cmt-location-ll-picker .title, .cmt-location-ll-picker .line1, .cmt-location-ll-picker .line2, .cmt-location-ll-picker .line3, .cmt-location-ll-picker .city, .cmt-location-ll-picker .zip").keyup(function(){var e=jQuery(".cmt-location-ll-picker .title"),t="";0<e.length&&(t=e.val()),10<(t+=t+","+jQuery(".cmt-location-ll-picker .city").val()+","+jQuery(".cmt-location-ll-picker .zip").val()).length&&jQuery(".cmt-location-ll-picker .search-box").val(t).trigger("change")})},jQuery(document).ready(function(){cmt.api.root.getApplication("core").mapService("autoMapper","cmg.core.mapper.services.AutoService")}),(cmg=cmg||{}).core=cmg.core||{},cmg.core.mapper=cmg.core.mapper||{},cmg.core.mapper.services=cmg.core.mapper.services||{},cmg.core.mapper.services.AutoService=function(){},cmg.core.mapper.services.AutoService.inherits(cmt.api.services.BaseService),cmg.core.mapper.services.AutoService.prototype.processAutoSearch=function(e,t,o){var r=document.getElementById(o).innerHTML,i=(o=Handlebars.compile(r),jQuery(".mapper-auto-categories").find(".mapper-items")),c=i.find(".mapper-item"),n=c.length;if(jQuery(".mapper-auto-categories .search-name").val(""),5<=n)alert("No more mappings allowed.");else{for(var a=!0,l=0;l<n;l++){if(e==jQuery(c[l]).find(".id").val()){a=!1;break}}if(a){var s=o({id:e,name:t});i.append(s),n=(c=i.find(".mapper-item")).length,c.last().find(".mapper-item-remove").click(function(){jQuery(this).closest(".mapper-item").remove()})}}},jQuery(document).ready(function(){var e=cmt.api.root.getApplication("core");e.mapService("meta","cmg.core.services.MetaService"),e.getService("meta").initListeners()}),cmg.core.services.MetaService=function(){this.addTemplate="addMetaTemplate",this.updateTemplate="updateMetaTemplate",this.viewTemplate="metaViewTemplate",this.refreshTemplate="metaRefreshTemplate"},cmg.core.services.MetaService.inherits(cmt.api.services.BaseService),cmg.core.services.MetaService.prototype.initListeners=function(){var t=this,e=jQuery(".cmt-meta-crud");0!=e.length&&e.each(function(){var e=jQuery(this);switch(e.attr("data-layout")){case"popup":t.initPopups(e);break;default:e.find(".cmt-meta-add").click(function(){t.initAddForm(e)})}})},cmg.core.services.MetaService.prototype.initPopups=function(e){e.find(".cmt-meta-add").click(function(){jQuery("#popup-attribute-add .message").hide(),jQuery("#popup-attribute-add .error").html(""),showPopup("#popup-attribute-add"),cmt.utils.data.bindEditor("#popup-attribute-add .late-editor")}),this.initPopupTriggers(e.find(".cmt-meta"))},cmg.core.services.MetaService.prototype.initPopupTriggers=function(e){var t=this;e.find(".btn-edit").click(function(){jQuery("#popup-attribute-update .message").hide(),jQuery("#popup-attribute-update .error").html(""),showPopup("#popup-attribute-update"),t.copyData(jQuery(this).closest(".cmt-meta"),"#popup-attribute-update"),cmt.utils.data.bindEditor("#popup-attribute-update .late-editor")}),e.find(".btn-delete").click(function(){showPopup("#popup-attribute-delete"),t.copyData(jQuery(this).closest(".cmt-meta"),"#popup-attribute-delete"),cmt.utils.data.bindEditor("#popup-attribute-delete .late-editor")})},cmg.core.services.MetaService.prototype.initAddForm=function(e){var t=document.getElementById(this.addTemplate).innerHTML,o=Handlebars.compile(t)({}),r=e.find(".cmt-meta-form");r.hide(),r.html(o),cmt.api.utils.request.registerTargetApp("core",r),r.find(".cmt-meta-close").click(function(){r.fadeOut("fast")}),r.fadeIn("slow")},cmg.core.services.MetaService.prototype.initUpdateForm=function(e,t,o){var r=document.getElementById(this.updateTemplate).innerHTML,i=Handlebars.compile(r)(o),c=e.find(".cmt-meta-form");c.hide(),c.html(i),cmt.api.utils.request.registerTargetApp("core",c),c.find(".cmt-meta-close").click(function(){c.fadeOut("fast")}),c.fadeIn("slow")},cmg.core.services.MetaService.prototype.add=function(e,t){var o=document.getElementById(this.viewTemplate).innerHTML,r=Handlebars.compile(o)(t),i=e.find(".cmt-meta-collection"),c=e.attr("data-layout");i.prepend(r);var n=i.find(".cmt-meta").first();switch(c){case"popup":closePopup("#popup-attribute-add"),this.initPopupTriggers(n),n.find(".cscroller").mCustomScrollbar({autoHideScrollbar:!0});break;default:cmt.api.utils.request.registerTargetApp("core",n),cmt.utils.ui.initActionsElement(n.find(".cmt-actions")),e.find(".cmt-meta-form").slideUp("slow")}},cmg.core.services.MetaService.prototype.refresh=function(e,t,o){switch(e.attr("data-layout")){case"popup":t.find(".title").html(o.name),t.find(".cmt-meta-data .mCSB_container").html(o.value),closePopup("#popup-attribute-update");break;default:var r=document.getElementById(this.refreshTemplate).innerHTML,i=Handlebars.compile(r)(o);t.find(".cmt-meta-header .title").html(o.title),t.find(".cmt-meta-data").replaceWith(i),e.find(".cmt-meta-form").slideUp("slow")}},cmg.core.services.MetaService.prototype.remove=function(e,t){var o=t.find(".cmt-actions");if(0<o.length){var r=o.attr("data-idx");jQuery("#actions-list-data-"+r).remove()}switch(e.attr("data-layout")){case"popup":t.remove(),closePopup("#popup-attribute-delete");break;default:t.remove()}},cmg.core.services.MetaService.prototype.copyData=function(e,t){var o=e.attr("data-id"),r=e.find(".title").html(),i=e.find(".cmt-meta-data .mCSB_container").html(),c=jQuery(t).find("form");c.find(".name").val(r),c.find(".description").val(i),c.find(".message.success").val(),c.find(".message.error").val();var n=cmt.utils.data.updateUriParam(c.attr("action"),"cid",o);c.attr("action",n)},cmg.core.services.MetaService.prototype.findContainer=function(e){var t=e.closest(".cmt-meta-crud");if(0==t.length){var o=e.closest(".actions-list-data"),r=e.closest(".popup-content-wrap");if(1==o.length){var i=o.attr("data-idx");t=jQuery("#actions-list-"+i).closest(".cmt-meta-crud")}if(1==r.length){var c=r.attr("data-id"),n=r.attr("data-type");t=jQuery(".cmt-meta-crud[data-id="+c+"][data-type="+n+"]")}}return t},jQuery(document).ready(function(){var e=cmt.api.root.getApplication("core");e.mapService("model","cmg.core.services.ModelService"),e.getService("model").initListeners()}),cmg.core.services.ModelService=function(){this.addTemplate="addModelTemplate",this.updateTemplate="updateModelTemplate",this.viewTemplate="modelViewTemplate",this.refreshTemplate="modelRefreshTemplate"},cmg.core.services.ModelService.inherits(cmt.api.services.BaseService),cmg.core.services.ModelService.prototype.initListeners=function(){var t=this,e=jQuery(".cmt-model-add");0!=e.length&&e.click(function(){var e=jQuery(this).closest(".cmt-model-crud");t.initAddForm(e)})},cmg.core.services.ModelService.prototype.initAddForm=function(e){var t=document.getElementById(this.addTemplate).innerHTML,o=Handlebars.compile(t)({}),r=e.find(".cmt-model-form");r.hide(),r.html(o),cmt.api.utils.request.registerTargetApp("core",r),cmt.utils.ui.initSelectElement(r.find(".cmt-select")),r.find(".cmt-model-close").click(function(){r.fadeOut("fast")}),r.fadeIn("slow")},cmg.core.services.ModelService.prototype.initUpdateForm=function(e,t,o){var r=document.getElementById(this.updateTemplate).innerHTML,i=Handlebars.compile(r)(o),c=e.find(".cmt-model-form");c.hide(),c.html(i),cmt.api.utils.request.registerTargetApp("core",c),cmt.utils.ui.initSelectElement(c.find(".cmt-select")),c.find(".cmt-model-close").click(function(){c.fadeOut("fast")}),c.fadeIn("slow")},cmg.core.services.ModelService.prototype.add=function(e,t){var o=document.getElementById(this.viewTemplate).innerHTML,r=Handlebars.compile(o)(t),i=e.find(".cmt-model-collection");i.prepend(r);var c=i.find(".cmt-model").first();cmt.api.utils.request.registerTargetApp("core",c),cmt.utils.ui.initActionsElement(c.find(".cmt-actions")),e.find(".cmt-model-form").slideUp("slow")},cmg.core.services.ModelService.prototype.refresh=function(e,t,o){var r=document.getElementById(this.refreshTemplate).innerHTML,i=Handlebars.compile(r)(o);t.find(".cmt-model-header .title").html(o.title),t.find(".cmt-model-data").replaceWith(i),e.find(".cmt-model-form").slideUp("slow")},cmg.core.services.ModelService.prototype.remove=function(e,t){var o=t.find(".cmt-actions");if(0<o.length){var r=o.attr("data-idx");jQuery("#actions-list-data-"+r).remove()}t.remove()},cmg.core.services.ModelService.prototype.findContainer=function(e){var t=e.closest(".cmt-model-crud");if(0==t.length){var o=e.closest(".actions-list-data");if(1==o.length){var r=o.attr("data-idx");t=jQuery("#actions-list-"+r).closest(".cmt-model-crud")}}return t},jQuery(document).ready(function(){var e=cmt.api.root.getApplication("core");e.mapService("socialData","cmg.core.data.services.SocialService"),e.getService("socialData").initListeners()}),cmg.core.data.services.SocialService=function(){this.addTemplate="addSocialDataTemplate",this.refreshTemplate="refreshSocialDataTemplate"},cmg.core.data.services.SocialService.inherits(cmt.api.services.BaseService),cmg.core.data.services.SocialService.prototype.initListeners=function(){var t=this,e=jQuery(".cmt-data-social-add");0!=e.length&&e.click(function(){var e=jQuery(this).closest(".cmt-data-social-crud");t.initAddForm(e)})},cmg.core.data.services.SocialService.prototype.initAddForm=function(e){var t=e.find(".cmt-data-social-options"),o=t.val(),r=t.find("option:selected").text(),i=document.getElementById(this.addTemplate).innerHTML,c=Handlebars.compile(i)({sns:r,icon:o});e.find(".cmt-data-social-collection").append(c);var n=e.find(".cmt-data-social").last();cmt.api.utils.request.registerTargetApp("core",n),n.find(".btn-remove").click(function(){n.remove()})},cmg.core.data.services.SocialService.prototype.refresh=function(e,t,o){var r=document.getElementById(this.refreshTemplate).innerHTML,i=Handlebars.compile(r)(o);t.html(i),cmt.api.utils.request.registerTargetApp("core",t)},cmg.core.data.services.SocialService.prototype.remove=function(e,t){var o=t.find(".cmt-actions");if(0<o.length){var r=o.attr("data-idx");jQuery("#actions-list-data-"+r).remove()}t.remove()},cmg.core.data.services.SocialService.prototype.findContainer=function(e){var t=e.closest(".cmt-data-social-crud");if(0==t.length){var o=e.closest(".actions-list-data");if(1==o.length){var r=o.attr("data-idx");t=jQuery("#actions-list-"+r).closest(".cmt-data-social-crud")}}return t},jQuery(document).ready(function(){var e=cmt.api.root.getApplication("core");e.mapService("user","cmg.core.services.UserService"),e.getService("user").initListeners()}),cmg.core.services.UserService=function(){},cmg.core.services.UserService.inherits(cmt.api.services.BaseService),cmg.core.services.UserService.prototype.initListeners=function(){},jQuery(document).ready(function(){var e=cmt.api.root.registerApplication("autoload","cmt.api.Application",{basePath:ajaxUrl});e.mapController("autoload","cmg.core.controllers.AutoloadController"),cmt.api.utils.request.register(e,jQuery("[cmt-app=autoload]"))}),cmg.core.controllers.AutoloadController=function(){},cmg.core.controllers.AutoloadController.inherits(cmt.api.controllers.RequestController),cmg.core.controllers.AutoloadController.prototype.autoloadActionSuccess=function(e,t){var o=t.data;if(cmt.utils.object.hasProperty(o,"widgetId")&&cmt.utils.object.hasProperty(o,"widgetHtml")){var r=jQuery("#"+o.widgetId);0<r.length&&r.html(o.widgetHtml)}var i=cmt.utils.object.hasProperty(o,"html"),c=cmt.utils.object.hasProperty(o,"json");if(cmt.utils.object.hasProperty(o,"id")&&(i||c)){var n=jQuery("#"+o.id);if(0<n.length)if(i)n.html(o.html);else if(c){var a=document.getElementById(o.id).innerHTML,l=Handlebars.compile(a)(o.json);n.html(l)}}},document.addEventListener("DOMContentLoaded",initLazyWidgetObserver),jQuery(document).ready(function(){var e=cmt.api.root.registerApplication("grid","cmt.api.Application",{basePath:ajaxUrl});e.mapController("crud","cmg.controllers.grid.CrudController"),cmt.api.utils.request.register(e,jQuery("[cmt-app=grid]"))}),(cmg=cmg||{}).controllers=cmg.controllers||{},cmg.controllers.grid=cmg.controllers.grid||{},cmg.services=cmg.services||{},cmg.services.grid=cmg.services.grid||{},cmg.controllers.grid.CrudController=function(){},cmg.controllers.grid.CrudController.inherits(cmt.api.controllers.RequestController),cmg.controllers.grid.CrudController.prototype.bulkActionSuccess=function(e,t){cmt.utils.data.refreshGrid()},cmg.controllers.grid.CrudController.prototype.bulkActionFailure=function(e,t){alert("Failed to process your request.")},cmg.controllers.grid.CrudController.prototype.genericActionSuccess=function(e,t){cmt.utils.data.refreshGrid()},cmg.controllers.grid.CrudController.prototype.genericActionFailure=function(e,t){alert("Failed to process your request.")},cmg.controllers.grid.CrudController.prototype.deleteActionSuccess=function(e,t){cmt.utils.data.refreshGrid()},cmg.controllers.grid.CrudController.prototype.deleteActionFailure=function(e,t){alert("Failed to process your request.")},cmg.controllers.grid.CrudController.prototype.pageActionSuccess=function(e,t){cmt.utils.data.refreshGrid()},cmg.controllers.grid.CrudController.prototype.pageActionFailure=function(e,t){alert("Failed to load the page.")},jQuery(document).ready(function(){var e=cmt.api.root.registerApplication("forms","cmt.api.Application",{basePath:ajaxUrl});cmt.api.utils.request.register(e,jQuery("[cmt-app=forms]"))}),(cmg=cmg||{}).forms=cmg.forms||{},cmg.forms.controllers=cmg.forms.controllers||{},cmg.forms.services=cmg.forms.services||{},jQuery(document).ready(function(){cmt.api.root.getApplication("forms").mapController("form","cmg.forms.controllers.FormController")}),cmg.forms.controllers.FormController=function(){},cmg.forms.controllers.FormController.inherits(cmt.api.controllers.RequestController),cmg.forms.controllers.FormController.prototype.defaultActionSuccess=function(e,t){cmg.logger.log("Form processed successfully.")},cmg.forms.controllers.FormController.prototype.defaultActionFailure=function(e,t){cmg.logger.log("Form processing failed.")},jQuery(document).ready(function(){var e=cmt.api.root.registerApplication("notify","cmt.api.Application",{basePath:ajaxUrl});cmt.api.utils.request.register(e,jQuery("[cmt-app=notify]"))}),(cmg=cmg||{}).notify=cmg.notify||{},cmg.notify.controllers=cmg.notify.controllers||{},cmg.notify.services=cmg.notify.services||{},jQuery(document).ready(function(){cmt.api.root.getApplication("notify").mapController("notification","cmg.notify.controllers.NotificationController"),jQuery(document.body).append(jQuery("#notificationData").detach()),jQuery(document.body).append(jQuery("#reminderData").detach()),jQuery(document.body).append(jQuery("#activityData").detach()),jQuery(document.body).append(jQuery("#announcementData").detach())}),cmg.notify.controllers.NotificationController=function(){},cmg.notify.controllers.NotificationController.inherits(cmt.api.controllers.BaseController),cmg.notify.controllers.NotificationController.prototype.toggleReadActionSuccess=function(e,t){location.reload(!0)},cmg.notify.controllers.NotificationController.prototype.readActionSuccess=function(e,t){e.is("[redirect]")?window.location=e.attr("redirect"):location.reload(!0)},cmg.notify.controllers.NotificationController.prototype.hreadActionSuccess=function(e,t){var o=e.find(".cmt-click").attr("type"),r=t.data.unread;t.data.consumed&&(jQuery(".count-header.count-"+o).html(r),jQuery(".count-sidebar.count-sidebar-header.count-"+o).html(r),jQuery(".count-sidebar.count-sidebar-content.count-"+o).html(r),0==r&&(jQuery(".count-header.count-"+o).fadeOut("fast"),jQuery(".count-sidebar.count-sidebar-header.count-"+o).fadeOut("fast"),jQuery(".count-sidebar.count-sidebar-content.count-"+o).fadeOut("fast"))),e.is("[redirect]")&&(window.location=e.attr("redirect"))},cmg.notify.controllers.NotificationController.prototype.toggleTrashActionSuccess=function(e,t){location.reload(!0)},cmg.notify.controllers.NotificationController.prototype.trashActionSuccess=function(e,t){location.reload(!0)},cmg.notify.controllers.NotificationController.prototype.deleteActionSuccess=function(e,t){location.reload(!0)},cmg.notify.controllers.NotificationController.prototype.statsActionSuccess=function(e){var t=e.data;t.hasOwnProperty("notificationCount")&&jQuery(".count-notification").html(t.notificationCount),t.hasOwnProperty("reminderCount")&&jQuery(".count-reminder").html(t.reminderCount),t.hasOwnProperty("activityCount")&&jQuery(".count-activity").html(t.activityCount),t.hasOwnProperty("announcementCount")&&jQuery(".count-announcement").html(t.announcementCount)},cmg.notify.controllers.NotificationController.prototype.notificationDataActionSuccess=function(e,t){var o=t.data,r=document.getElementById("notificationData").innerHTML;if(o.hasOwnProperty("notifications")){var i="",c=Handlebars.compile(r);jQuery.each(o.notifications,function(e,t){i+=c({data:t,siteUrl:siteUrl})}),0<o.notifications.length?i+='<li class="align align-center"><a href="'+siteUrl+'notify/notification/all">View All</a></li>':i="Notifications not found.",i="<ul>"+i+"</ul>",jQuery("#popout-notification").find(".popout-content").html(i),cmt.api.utils.request.register(cmt.api.root.getApplication("notify"),jQuery("#popout-notification").find("[cmt-app=notify]"))}},cmg.notify.controllers.NotificationController.prototype.reminderDataActionSuccess=function(e,t){var o=t.data,r=document.getElementById("reminderData").innerHTML;if(o.hasOwnProperty("reminders")){var i="",c=Handlebars.compile(r);jQuery.each(o.reminders,function(e,t){i+=c({data:t,siteUrl:siteUrl})}),0<o.reminders.length?i+='<li class="align align-center"><a href="'+siteUrl+'notify/reminder/all">View All</a></li>':i="Reminders not found.",i="<ul>"+i+"</ul>",jQuery("#popout-reminder").find(".popout-content").html(i),cmt.api.utils.request.register(cmt.api.root.getApplication("notify"),jQuery("#popout-reminder").find("[cmt-app=notify]"))}},cmg.notify.controllers.NotificationController.prototype.activityDataActionSuccess=function(e,t){var o=t.data,r=document.getElementById("activityData").innerHTML;if(o.hasOwnProperty("activities")){var i="",c=Handlebars.compile(r);jQuery.each(o.activities,function(e,t){i+=c({data:t,siteUrl:siteUrl})}),0<o.activities.length?i+='<li class="align align-center"><a href="'+siteUrl+'notify/activity/all">View All</a></li>':i="Activites not found.",i="<ul>"+i+"</ul>",jQuery("#popout-activity").find(".popout-content").html(i),cmt.api.utils.request.register(cmt.api.root.getApplication("notify"),jQuery("#popout-activity").find("[cmt-app=notify]"))}},cmg.notify.controllers.NotificationController.prototype.announcementDataActionSuccess=function(e,t){var o=t.data,r=document.getElementById("announcementData").innerHTML;if(o.hasOwnProperty("announcements")){var i="",c=Handlebars.compile(r);jQuery.each(o.announcements,function(e,t){i+=c({data:t,siteUrl:siteUrl})}),0<o.announcements.length?i+='<li class="align align-center"><a href="'+siteUrl+'notify/announcement/all">View All</a></li>':i="Announcements not found.",i="<ul>"+i+"</ul>",jQuery("#popout-announcement").find(".popout-content").html(i),cmt.api.utils.request.register(cmt.api.root.getApplication("notify"),jQuery("#popout-announcement").find("[cmt-app=notify]"))}};